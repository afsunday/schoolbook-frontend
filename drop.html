<style>
/*.passport-file {
    z-index: 1;
    opacity: -20;
    position: absolute;
    width: 55px;
    margin-left: 22px;
    margin-top: 50px;
}

.passport-icon {
    color: var(--primary);
    position: absolute;
    margin-top: 47px;
    margin-left: 50px;
    padding: 5px 4px 0px 4px;
    font-size: 12px;
    text-align: center;
    background-color: #fff;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.15) !important;    
    height: 1.75rem;
    width: 1.75rem;
    border-radius: 50%;
}

/*@media (min-width: 769px) {
  #fixed-bottom-nav {
    display: none !important;
  }
  
}
@media (max-width: 768px) {
  .d-footer {
    display: none;
  }
}*/

/*#fixed-bottom-nav {
  position: fixed;
  right: 0;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 54px;
  display: flex;
}
.bottom-nav-flex {
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  justify-content: space-around;
  align-items: center;
}
.bottom-nav-flex > div {
  margin-top: 1px;
  margin-bottom: 0px;
  font-size: 15px;
}
.bottom-nav-flex .small {
  font-size: 11px;
  font-weight: 600;
}
.bottom-nav-flex > * {
  color: #666666;
}
.bottom-nav-flex > a:hover {
  color: #666666;
}
.b-nav-active {
  color: #339966;
}
.b-nav-active > * {
  color: #339966;
}





.dropdown-menu.modal-dropmenu {
    max-width: 280px;
    width: 500px;
    left: 6px;
}























.custom-control-lg .custom-control-label::before,
.custom-control-lg .custom-control-label::after {
  top: 0.1rem !important;
  left: -2rem !important;
  width: 1.20rem !important;
  height:  1.20rem !important;
  border-radius: 3px !important;
  outline: none !important;
  box-shadow: none !important;
  font-size: 15px !important;
}

.custom-control-lg .custom-control-label {
  margin-left: 0.5rem !important;
  font-size: 1rem !important;
}

.custom-control-lg .custom-control-label::before {
  border: 1px solid #cccccc !important;
}

.custom-control-lg .custom-control-input:checked ~ .custom-control-label::after {
  color: #fff;
  border-color: #007bff;
  background-color: #007bff;
  transition-delay: 0s !important;
}
*/





</style>  
{{student.classname}} {{student.classarm}}  
{{student.status}}
{{student.admission_number}}
<div class="row no-gutters px-0" id="collapseExample">
    <div class="col text-left">
        <div class="small-xs text-muted ">Due Fees</div>
        <div class="small font-weight-bold text-danger">&#8358; 0.0</div>
    </div>
    <div class="col text-left px-1 pl-2">
        <div class="small-xs text-muted">Age</div>
        <div class="small font-weight-midi text-dark">16 Years</div>
    </div>
</div>


<div class="border rounded-top-lg rounded-right-lg pt-2 pb-1 px-2 mb-3">
    <div class="text-capitalize font-weight-midi h7">Adm Date</div>
    <div class="text-capitalize small">{{student.admission_date}}</div>
</div>

<div class="border rounded-top-lg rounded-right-lg pt-2 pb-1 px-2 mb-3">
    <div class="text-capitalize font-weight-midi h7">Health Info</div>
    <div class="text-capitalize small">Balogun</div>
</div>

<div class="border rounded-top-lg rounded-right-lg pt-2 pb-1 px-2 mb-3">
    <div class="text-capitalize font-weight-midi h7">Phone</div>
    <div class="text-capitalize small">{{student.phone}}</div>
</div>

<div class="border rounded-top-lg rounded-right-lg pt-2 pb-1 px-2 mb-3">
    <div class="text-capitalize font-weight-midi h7">Mobile Phone</div>
    <div class="text-capitalize small">Balogun</div>
</div>

<div class="border rounded-top-lg rounded-right-lg pt-2 pb-1 px-2 mb-3">
    <div class="text-capitalize font-weight-midi h7">Email</div>
    <div class="text-capitalize small">{{student.email}}</div>
</div>

<div class="border rounded-top-lg rounded-right-lg pt-2 pb-1 px-2 mb-3">
    <div class="text-capitalize font-weight-midi h7">Home Address</div>
    <div class="text-capitalize small">{{student.residential_address}}</div>
</div>


<script type="text/javascript">
import store from '../store'
import User from '@/apis/User'

// do not delete

export default {
  async admin (callback) {
    if (store.getters.user === null || store.getters.user.length <= 0) {
          await User.me().then((res) => {

          // store.commit('SET_USER', res.data)
          // if (store.getters.user.type === 'admin') return callback(true)
         //   else return callback(false)

        })
        .catch((err) => {
              // if (err.response.status === 401) return callback(false)
              // else return callback(false)
        })
    }
    else if (store.getters.user.type === 'admin') {
          return callback(true)
      } else {
        return callback(false)
      }
  }
}


// do not delete
const selectStudent = (event, student) => {
    if (event.currentTarget.checked) {

        selectedStudents.value.push(student)
    } else {
        
        // if uncheck we will remove student object from selection
        selectedStudents.value.forEach((selected, index) => {
            if(selected.student_id === student.student_id) {
                selectedStudents.value.splice(index, 1);
            }
        })                
    } 
}

</script>

<div class="custom-control-lg custom-control custom-checkbox">
    <input type="checkbox" 
        :value="true" 
        v-model="fetchFeesParams.archives" 
        class="custom-control-input" id="filterHasAchives">
    <label class="custom-control-label small" for="filterHasAchives">Achives Only</label>
</div>

<style type="text/css">
  .fade-in {
  animation: fadeIn ease 10s;
  -webkit-animation: fadeIn ease 10s;
  -moz-animation: fadeIn ease 10s;
  -o-animation: fadeIn ease 10s;
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

@-moz-keyframes fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1
  }
}

@-webkit-keyframes fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1
  }
}

@-o-keyframes fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1
  }
}
</style>





<!-- important do not delete later on -->
<div class="input-group input-group-solid mb-4">
    <div class="input-group-prepend">
        <div class="input-group-text bg-light">
            <div :class="{'show': dropdownToggle }" class="dropdown"><!-- data-toggle="dropdown" -->
            <a @click="dropdownToggle = !dropdownToggle"
                class="dropdown-toggle text-dark text-decoration-none small"
                role="button" id="dLink"
                aria-haspopup="true"
                aria-expanded="false">
                <i class="fas fa-filter fa-sm"></i>
                <span class="d-none d-sm-inline"> Filter</span>
            </a>
            <div :class="{'show': dropdownToggle }" class="dropdown-menu modal-dropmenu dropdown-menu-right border-0 shadow py-3 px-2" aria-labelledby="dLink">
                
                <select class="custom-select" v-model="fetchStudentParams.class" name="class-filter">
                    <option value="all">All Classes</option>
                    <option value="1">Demo class</option>
                </select>
            </div>
        </div>
    </div>
</div>
<input class="form-control bg-light" type="search" @keyup.enter="fetchStudents()" v-model="fetchStudentParams.search" placeholder="Search" aria-label="Search">
</div>

<!-- <div class="custom-control-lg custom-control custom-checkbox mr-n2">
    <input type="checkbox" class="custom-control-input" 
        :checked="selectedStudents.some(std => std.student_id === student.student_id)"
        :disabled="feeInvoices.some(invoice => invoice.student_id === student.student_id)"
        @click="selectStudent($event, student)" :id="'checkbox'+student.student_id">
    <label class="custom-control-label" :for="'checkbox'+student.student_id"></label>
</div> -->













































<template>
    <base-admin>
        <template v-slot:header>
            <header class="bg-gray-light">
                <div class="container-lg pt-2 pt-sm-3">
                    <div class="d-flex flex-wrap justify-content-between">
                        <div class="text-wrap">
                            <span class="h7"><i class="fas fa-columns"></i></span> Students
                        </div>
                        
                        <div class="dropdown">
                            <a class="btn btn-light btn-sm small border" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Options</a>
                            <div class="dropdown-menu dropdown-menu-right border-0 shadow m-0 py-3">

                                <router-link class="dropdown-item small font-weight-midi py-2" :to="`/m/students/${route.params.studentId}/edit`">Edit Student</router-link>

                                <a class="dropdown-item small font-weight-midi py-2" data-bs-backdrop="static" data-bs-keyboard="false"
                                 data-bs-toggle="modal" data-bs-target="#deactivate-modal" href="#">Mail Guardian</a>

                                <a class="dropdown-item small font-weight-midi py-2" data-bs-backdrop="static" data-bs-keyboard="false"
                                 data-bs-toggle="modal" data-bs-target="#deactivate-modal" href="#">Achive Guardian</a>

                                <a class="dropdown-item small font-weight-midi py-2" data-bs-backdrop="static" data-bs-keyboard="false"
                                 data-bs-toggle="modal" data-bs-target="#deactivate-modal" href="#">Delete Guardian</a>

                            </div>
                        </div>
                    </div>

                    <div class="d-flex mt-3 mt-sm-3">
                        <img class="rounded-2 border bg-light me-2 me-sm-3" src="@/assets/images/user1.png" height="70" width="70" alt="">
                        <div class="d-flex flex-column align-item-start">
                            <div class="d-inline-flex">
                                <span class=""><i class="icon icon-users2 icon-lg"></i></span>
                                <h6 class="h7 text-break font-weight-midi ms-1">
                                    {{ student.firstname }} {{ student.surname }} <span class="d-none d-xs-inline">{{ student.othername }}</span>
                                </h6>
                            </div>
                            <div class="d-inline-flex">
                                <span class=""><i class="icon icon-mail icon-lg"></i></span>
                                <h6 class="h7 text-break font-weight-midi ms-1">{{ student.email }}</h6>
                            </div>
                            <div class="d-inline-flex">
                                <span class=""><i class="icon icon-leads1 icon-lg"></i></span>
                                <h6 class="h7 text-break font-weight-midi ms-1">{{ student.username }}</h6>
                            </div>                           
                        </div>
                    </div>

                    <div class="border-top mt-2 p-0" style="overflow-x: auto; scrollbar-width:thin;">
                        <ul class="nav nav-pills mt-2" id="pills-tab" role="tablist" style="flex-wrap: unset;">
                            <li class="nav-item" role="presentation">
                                <a class="nav-link ps-0 pb-sm-3 pb-3 active" id="pills-bio-tab" data-bs-toggle="pill" href="#pills-bio" role="tab" aria-controls="pills-bio" aria-selected="true">BioData</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link px-sm-3 px-2 pb-sm-3 pb-3" id="pills-fees-tab" data-bs-toggle="pill" href="#pills-fees" role="tab" aria-controls="pills-fees" aria-selected="false">Fees</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link px-sm-3 px-2 pb-sm-3 pb-3" id="pills-attendance-tab" data-bs-toggle="pill" href="#pills-attendance" role="tab" aria-controls="pills-attendance" aria-selected="false">Attendance</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link px-sm-3 px-2 pb-sm-3 pb-3" id="pills-reports-tab" data-bs-toggle="pill" href="#pills-reports" role="tab" aria-controls="pills-reports" aria-selected="false">Reports</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link px-sm-3 px-2 pb-sm-3 pb-3 text-nowrap" id="pills-history-tab" data-bs-toggle="pill" href="#pills-history" role="tab" aria-controls="pills-history" aria-selected="false">Class History</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </header>
        </template>

        <template v-slot:default>
                <div class="tab-content" id="pills-tabContent">
                    <div class="tab-pane fade show active px-0" id="pills-bio" role="tabpanel" aria-labelledby="pills-bio-tab">
                        <student-bio-data :student="student" :loading="loadingState.loading" :loaded="loadingState.loaded" ></student-bio-data>
                    </div>
                    <div class="tab-pane fade" id="pills-fees" role="tabpanel" aria-labelledby="pills-fees-tab">
                        <student-fees></student-fees>
                    </div>
                    <div class="tab-pane fade px-0" id="pills-attendance" role="tabpanel" aria-labelledby="pills-attendance-tab">
                        <student-attendance></student-attendance>
                    </div>
                    <div class="tab-pane fade" id="pills-reports" role="tabpanel" aria-labelledby="pills-reports-tab">
                        <student-report-card></student-report-card>
                    </div>
                    <div class="tab-pane fade" id="pills-history" role="tabpanel" aria-labelledby="pills-history-tab">
                        <student-batch-history></student-batch-history>
                    </div>
                </div>
        </template>

    </base-admin>
</template>

<script>
// basic components
import BaseAdmin from '@/views/admin/shared/BaseAdmin'
import LinePreload from '@/components/LinePreload';

// pages component
import StudentBioData from '@/views/admin/students/StudentBioData';
import StudentFees from '@/views/admin/students/StudentFees';
import StudentAttendance from '@/views/admin/students/StudentAttendance';
import StudentReportCard from '@/views/admin/students/StudentReportCard';
import StudentBatchHistory from '@/views/admin/students/StudentBatchHistory';

// library:vue
import { reactive, ref, onMounted, watch } from 'vue'
import { useRoute } from 'vue-router'

// apis
import Student from '@/apis/Student';

export default {
    name: 'StudentProfile',
    components: {
        BaseAdmin,
        LinePreload,
        StudentBioData,
        StudentFees,
        StudentAttendance,
        StudentReportCard,
        StudentBatchHistory
    },

    setup() {
        const route = useRoute()

        const loadingState = reactive({
            loading: false, loaded: false,
        })

        const student = ref([])

        const fetchStudentBioData = async () => {
            loadingState.loading = true
            let studentId = route.params.studentId

            await Student.me(studentId).then((res) => {
                student.value = res.data[0]
                loadingState.loading = false;
                loadingState.loaded = true;
            })
            .catch((err) => {
               // 
            })
        }

        //onCreated fetch student bio data
        fetchStudentBioData()

        return {
            loadingState, student, route
        }
    }
}
</script>

<style lang="scss" scoped>
</style>

















<div class="border-top mt-2 p-0" style="overflow-x: auto; scrollbar-width:thin;">
    <ul class="nav nav-pills mt-2" id="pills-tab" role="tablist" style="flex-wrap: unset;">
        <li class="nav-item" role="presentation">
            <a class="nav-link ps-0 pb-sm-3 pb-3 active" id="pills-bio-tab" data-bs-toggle="pill" href="#pills-bio" role="tab" aria-controls="pills-bio" aria-selected="true">BioData</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link px-sm-3 px-2 pb-sm-3 pb-3" id="pills-fees-tab" data-bs-toggle="pill" href="#pills-fees" role="tab" aria-controls="pills-fees" aria-selected="false">Fees</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link px-sm-3 px-2 pb-sm-3 pb-3" id="pills-attendance-tab" data-bs-toggle="pill" href="#pills-attendance" role="tab" aria-controls="pills-attendance" aria-selected="false">Attendance</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link px-sm-3 px-2 pb-sm-3 pb-3" id="pills-reports-tab" data-bs-toggle="pill" href="#pills-reports" role="tab" aria-controls="pills-reports" aria-selected="false">Reports</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link px-sm-3 px-2 pb-sm-3 pb-3 text-nowrap" id="pills-history-tab" data-bs-toggle="pill" href="#pills-history" role="tab" aria-controls="pills-history" aria-selected="false">Class History</a>
        </li>
    </ul>
</div>